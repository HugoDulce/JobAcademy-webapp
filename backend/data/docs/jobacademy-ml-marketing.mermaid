graph TD
    %% ============================================================
    %% JobAcademy ML for Marketing â€” Complete Knowledge Graph
    %% ~65 atomic concepts Â· 8 layers Â· Sports as laboratory
    %% Prerequisite DAG: A â†’ B means "A is required for B"
    %% ============================================================

    %% â”€â”€ LAYER 0: Mathematical Foundations â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    PROB["ðŸ”µ Probability<br/>Basics"]
    BAYES["ðŸ”µ Bayes<br/>Theorem"]
    LINALG["ðŸ”µ Linear Algebra<br/>Vectors Â· Matrices"]
    CALC["ðŸ”µ Derivatives<br/>& Chain Rule"]
    DIST["ðŸ”µ Distance<br/>Metrics"]
    EV["ðŸ”µ Expected Value<br/>& Variance"]
    SUMRULE["ðŸ”µ Law of Total<br/>Probability"]

    %% â”€â”€ LAYER 1: ML Core Primitives â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    COND["ðŸŸ¢ Conditional<br/>Independence"]
    CONF["ðŸŸ¢ Confusion<br/>Matrix"]
    PR["ðŸŸ¢ Precision<br/>Recall Â· F1"]
    ROC["ðŸŸ¢ ROC<br/>& AUC"]
    GD["ðŸŸ¢ Gradient<br/>Descent"]
    LOSS["ðŸŸ¢ Loss<br/>Functions"]
    OVERFIT["ðŸŸ¢ Overfitting &<br/>Regularization"]
    FEAT["ðŸŸ¢ Feature<br/>Scaling"]
    ENTROPY["ðŸŸ¢ Entropy &<br/>Information Gain"]
    SIGMOID["ðŸŸ¢ Sigmoid<br/>Function"]
    KERNEL["ðŸŸ¢ Kernel<br/>Trick"]
    CROSSVAL["ðŸŸ¢ Cross-<br/>Validation"]

    %% â”€â”€ LAYER 2: Supervised Models â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    NB["ðŸŸ¡ Naive<br/>Bayes"]
    KNN["ðŸŸ¡ K-Nearest<br/>Neighbors"]
    DT["ðŸŸ¡ Decision<br/>Trees"]
    LINREG["ðŸŸ¡ Linear<br/>Regression"]
    LOGREG["ðŸŸ¡ Logistic<br/>Regression"]
    SVM["ðŸŸ¡ Support Vector<br/>Machine"]
    RF["ðŸŸ¡ Random<br/>Forest"]
    GBM["ðŸŸ¡ Gradient<br/>Boosting"]

    %% â”€â”€ LAYER 2b: Unsupervised â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    KMEANS["ðŸŸ¡ K-Means<br/>Clustering"]
    SVD["ðŸŸ¡ Singular Value<br/>Decomposition"]

    %% â”€â”€ LAYER 3: Stats & Experimentation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    HYPO["ðŸ”· Hypothesis<br/>Testing"]
    POWER["ðŸ”· Power Analysis<br/>& Sample Size"]
    BOOTSTR["ðŸ”· Bootstrap &<br/>Resampling"]
    REGRINF["ðŸ”· Regression for<br/>Inference"]
    TS_BASICS["ðŸ”· Time Series<br/>Basics"]

    %% â”€â”€ LAYER 4: Causal Inference â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    PO["ðŸ”¶ Potential<br/>Outcomes"]
    ATE["ðŸ”¶ Average Treatment<br/>Effect"]
    CONFBIAS["ðŸ”¶ Confounding &<br/>Selection Bias"]
    RCT["ðŸ”¶ A/B Testing<br/>(RCT Design)"]
    DID["ðŸ”¶ Difference-in-<br/>Differences"]
    PSM["ðŸ”¶ Propensity Score<br/>Matching"]
    SYNTH["ðŸ”¶ Synthetic<br/>Control"]

    %% â”€â”€ LAYER 5: Marketing Science Core â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    CLV["ðŸŸ£ Customer<br/>Lifetime Value"]
    RESP["ðŸŸ£ Response<br/>Modeling"]
    SEG["ðŸŸ£ Behavioral<br/>Segmentation"]
    INCR["ðŸŸ£ Incrementality<br/>Testing"]
    UPLIFT["ðŸŸ£ Uplift<br/>Modeling"]
    CHURN["ðŸŸ£ Churn &<br/>Retention"]
    ATTR["ðŸŸ£ Attribution<br/>(& Its Limits)"]
    DIMRET["ðŸŸ£ Diminishing<br/>Returns"]

    %% â”€â”€ LAYER 6: Marketing Systems â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    MMM["ðŸ”´ Media Mix<br/>Modeling"]
    PRICE["ðŸ”´ Price<br/>Elasticity"]
    PORTF["ðŸ”´ Budget<br/>Allocation"]
    FORECAST["ðŸ”´ Demand<br/>Forecasting"]
    RECSYS["ðŸ”´ Recommendation<br/>Systems"]
    LTRANK["ðŸ”´ Learning<br/>to Rank"]

    %% â”€â”€ LAYER 7: Sports Laboratory Projects â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    P_TICKET["âš¡ Ticket Pricing<br/>Optimization"]
    P_SPONSOR["âš¡ Sponsorship<br/>ROI Measurement"]
    P_FANCLV["âš¡ Fan CLV &<br/>Retention System"]
    P_DEMAND["âš¡ Event Demand<br/>Forecasting"]
    P_BRAND["âš¡ Athlete Brand<br/>Valuation"]
    P_CAMPAIGN["âš¡ Campaign<br/>Incrementality"]

    %% ============================================================
    %% EDGES: Prerequisite Relationships
    %% ============================================================

    %% â”€â”€ Math Foundations â†’ ML Core â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    PROB --> BAYES
    PROB --> COND
    PROB --> EV
    PROB --> SUMRULE
    BAYES --> NB
    COND --> NB
    EV --> LOSS
    EV --> HYPO
    LINALG --> LINREG
    LINALG --> SVD
    CALC --> GD
    CALC --> LOSS

    %% â”€â”€ ML Core internal â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    CONF --> PR
    PR --> ROC
    GD --> LINREG
    LOSS --> LINREG
    LOSS --> GD
    DIST --> KNN
    DIST --> KMEANS
    FEAT --> KNN
    ENTROPY --> DT
    OVERFIT --> DT
    OVERFIT --> CROSSVAL
    LINREG --> LOGREG
    SIGMOID --> LOGREG
    LOGREG --> SVM
    KERNEL --> SVM
    DT --> RF
    RF --> GBM
    GD --> GBM

    %% â”€â”€ Stats & Experimentation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    PROB --> HYPO
    EV --> HYPO
    HYPO --> POWER
    HYPO --> BOOTSTR
    LINREG --> REGRINF
    HYPO --> REGRINF
    EV --> TS_BASICS
    LINREG --> TS_BASICS

    %% â”€â”€ Causal Inference â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    HYPO --> PO
    EV --> PO
    PO --> ATE
    PO --> CONFBIAS
    ATE --> RCT
    POWER --> RCT
    CONFBIAS --> RCT
    ATE --> DID
    TS_BASICS --> DID
    CONFBIAS --> PSM
    LOGREG --> PSM
    DID --> SYNTH
    REGRINF --> SYNTH

    %% â”€â”€ Marketing Science Core â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    EV --> CLV
    PROB --> CLV
    TS_BASICS --> CLV
    LOGREG --> RESP
    ROC --> RESP
    CROSSVAL --> RESP
    KMEANS --> SEG
    RESP --> SEG
    RCT --> INCR
    ATE --> INCR
    INCR --> UPLIFT
    RESP --> UPLIFT
    DT --> UPLIFT
    RESP --> CHURN
    CLV --> CHURN
    TS_BASICS --> CHURN
    RCT --> ATTR
    CONFBIAS --> ATTR
    REGRINF --> DIMRET
    CLV --> DIMRET

    %% â”€â”€ Marketing Systems â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    REGRINF --> MMM
    DIMRET --> MMM
    DID --> MMM
    TS_BASICS --> MMM
    DIMRET --> PRICE
    HYPO --> PRICE
    CLV --> PRICE
    MMM --> PORTF
    CLV --> PORTF
    PRICE --> PORTF
    TS_BASICS --> FORECAST
    GBM --> FORECAST
    OVERFIT --> FORECAST
    SVD --> RECSYS
    DIST --> RECSYS
    RESP --> RECSYS
    LOGREG --> LTRANK
    ROC --> LTRANK

    %% â”€â”€ Sports Projects (multi-prerequisite) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    PRICE --> P_TICKET
    FORECAST --> P_TICKET
    SEG --> P_TICKET

    INCR --> P_SPONSOR
    MMM --> P_SPONSOR
    SYNTH --> P_SPONSOR

    CLV --> P_FANCLV
    CHURN --> P_FANCLV
    SEG --> P_FANCLV
    UPLIFT --> P_FANCLV

    FORECAST --> P_DEMAND
    TS_BASICS --> P_DEMAND
    PRICE --> P_DEMAND

    CLV --> P_BRAND
    RECSYS --> P_BRAND
    SEG --> P_BRAND

    INCR --> P_CAMPAIGN
    UPLIFT --> P_CAMPAIGN
    RCT --> P_CAMPAIGN
    ATTR --> P_CAMPAIGN

    %% ============================================================
    %% STYLING
    %% ============================================================
    classDef foundation fill:#dbeafe,stroke:#3b82f6,stroke-width:2px,color:#1e3a5f
    classDef core fill:#d1fae5,stroke:#10b981,stroke-width:2px,color:#065f46
    classDef supervised fill:#fef3c7,stroke:#f59e0b,stroke-width:2px,color:#78350f
    classDef stats fill:#e0e7ff,stroke:#6366f1,stroke-width:2px,color:#312e81
    classDef causal fill:#fff7ed,stroke:#ea580c,stroke-width:2px,color:#7c2d12
    classDef marketing fill:#f3e8ff,stroke:#9333ea,stroke-width:2px,color:#581c87
    classDef systems fill:#fee2e2,stroke:#ef4444,stroke-width:2px,color:#7f1d1d
    classDef project fill:#fef08a,stroke:#ca8a04,stroke-width:3px,color:#713f12

    class PROB,BAYES,LINALG,CALC,DIST,EV,SUMRULE foundation
    class COND,CONF,PR,ROC,GD,LOSS,OVERFIT,FEAT,ENTROPY,SIGMOID,KERNEL,CROSSVAL core
    class NB,KNN,DT,LINREG,LOGREG,SVM,RF,GBM,KMEANS,SVD supervised
    class HYPO,POWER,BOOTSTR,REGRINF,TS_BASICS stats
    class PO,ATE,CONFBIAS,RCT,DID,PSM,SYNTH causal
    class CLV,RESP,SEG,INCR,UPLIFT,CHURN,ATTR,DIMRET marketing
    class MMM,PRICE,PORTF,FORECAST,RECSYS,LTRANK systems
    class P_TICKET,P_SPONSOR,P_FANCLV,P_DEMAND,P_BRAND,P_CAMPAIGN project
